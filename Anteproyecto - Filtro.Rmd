---
title: "Anteproyecto - Filtro"
author: Erik Mejia Hernandez - Adrian Homero Moreno Garcia - Julieta Guadalupe Ruiz
  Rodriguez
date: "16 de marzo de 2017"
output: html_document
---


### UAZ Students

###### This dataset contains relevant data of the students who are studying the undergraduate level of different programs at the Autonomous University of Zacatecas.
###### The data were obtained through surveys that were made to the student population, later we selected those that could help us in our investigation.
###### The data set file's name is datasetUAZ.csv, in the next block we read the dataset to continue working with it.

```{r}
knitr::opts_chunk$set(echo = TRUE)
dsuaz <- read.csv("datasetUAZ.csv", stringsAsFactors = FALSE)
```


#### The Survey
###### The survey consisted of 23 questions, which became our attributes in the dataset, The survey was carried out digitally, we created the survey with the tool of Google, and through social networks we distributed it among the students.
###### After completing the survey we obtained 254 responses in total, however after analyzing the data we realized that only 142 records were useful, since we grouped the data according to the degree to which they belonged we observed that the numbers of students of The same degree that answered our survey was very different, so to have more balanced data regarding the number of students who answered the survey we decided to eliminate those answers that were below average.
###### Then we can observe each one of the questions we made and some examples of the types of answers that we obtained:
```{r strwbcd}
str(dsuaz)
```

##### Head & Tail
###### Con las funciones head y tail podemos obtener una peque??a muestra de los datos 
```{r, headtrain}
head(dsuaz)
tail(dsuaz)
```

### Parte 2- KNN- Formulas to Normalize
```{r set}

# Funcion para Normalizar por min-max
minmax <- function(x) (
  return (( x - min(x)) / (max(x) - min(x)))
  ) 
  

# Funcion para Normalizar por z-Score
zscore <- function(x) (
  return (x - mean(x) / (sd(x)))
  )
```

### Parte 2- KNN- Normalization
```{r}
dsuaz$Ssalario_estimado <- factor(dsuaz$Ssalario_estimado)


dsuaz$Ssalario_estimado <- as.numeric(dsuaz$Ssalario_estimado);

# 1- Laborar 2- Posgrada
dsuaz$planes_egreso <- factor(dsuaz$planes_egreso)

dsuaz$planes_egreso <- as.numeric(dsuaz$planes_egreso)

# 1- Hombre 2- Mujer
dsuaz$genero <- factor(dsuaz$genero)

dsuaz$genero <- as.numeric(dsuaz$genero)

dsuaz$licenciatura <- factor(dsuaz$licenciatura)

dsuaz$dificultad_licenciatura <- factor(dsuaz$dificultad_licenciatura)

dsuaz$dificultad_licenciatura <- as.numeric(dsuaz$dificultad_licenciatura)

dsuaz_n <- as.data.frame(sapply(dsuaz[,c(3,5,8,13,17)], minmax))
dsuaz_zs <- as.data.frame(sapply(dsuaz[,c(3,5,8,13,17)], zscore))

#dsuaz_n <- c(sapply(dsuaz[c(1,2)], minmax)) 3,5,8,13,17,19,23

#dsuaz_zs <- c(sapply(dsuaz[c(1,2)], zscore))

```



### Compute Distances


### Training and Testing set
#### Min Max Normalization
```{r}

dsuaz_train <- dsuaz_n[1:90,]
dsuaz_testing <- dsuaz_n[91:113,]

dsuaz_train_labels <- dsuaz[1:90,21]
dsuaz_testing_labels <- dsuaz[91:113,21]

dim(dsuaz_train)
dim(dsuaz_testing)
```

#### Z-score Normalization
```{r}
dsuaz_train_zs <- dsuaz_zs[1:90,]
dsuaz_testing_zs <- dsuaz_zs[91:113,]

dim(dsuaz_train_zs)
dim(dsuaz_testing_zs)
```


### KNN classification outputs
#### Min Max Normalization
```{r}
library(class)
library(gmodels)
dsuaz_results <- knn(train = dsuaz_train,test = dsuaz_testing,cl = dsuaz_train_labels, k = 20)

CrossTable(x = dsuaz_testing_labels,
            y = dsuaz_results,
            prop.chisq = FALSE)
```

#### Z-score Normalization
```{r}
library(class)
library(gmodels)
dsuaz_results_zs <- knn(train = dsuaz_train_zs,test = dsuaz_testing_zs,cl = dsuaz_train_labels, k = 20)

CrossTable(x = dsuaz_testing_labels,
            y = dsuaz_results_zs,
            prop.chisq = FALSE)
```

### Determine the optimal K
#### Min Max Normalization
<center>
![](images/KNN table min-max.png)

#### Z-score Normalization
#### In the table, we can see that the k equal to 10 is the best because it gives us the best true porcentage over the rest
<center>
![](images/KNN table Z-score.png)